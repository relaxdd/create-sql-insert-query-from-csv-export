(function(d,h){typeof exports=="object"&&typeof module<"u"?module.exports=h():typeof define=="function"&&define.amd?define(h):(d=typeof globalThis<"u"?globalThis:d||self,d.createSqlInsertQueryFromCsvExport=h())})(this,function(){"use strict";function d(o,c){return o>=c[0]&&o<=c[1]}function h(o,c){const u=[];for(let f=0;f<o.length;f+=c)u.push(o.slice(f,f+c));return u}function R({csvData:o,tableName:c,tableColumns:u,removeHeader:f=!0,skipRowIfNullableCols:A={},replaceColIfNullable:y={}}){const a='"',l="NULL";let x="INSERT INTO "+c+" ("+u.map(t=>`"${t}"`).join(", ")+`) VALUES
	`;function N(t){return t===l||!(t.startsWith(a)&&t.endsWith(a))?t:`'${t.slice(1,-1)}'`}function g(t){const p=[...t.matchAll(",")].map(s=>s.index),e=[...t.matchAll(a)].map(s=>s.index),r=h(e,2);return p.filter(s=>!r.some(n=>n.length===2?d(s,n):!1))}function j(t){const p=t.split(",").map(e=>e.trim());if(p.length!==u.length){const e=[-1].concat(g(t)),r=[];for(const[s,n]of e.entries()){const i=e==null?void 0:e[s+1],m=t.slice(n+1,i);r.push(m)}return r}return p}const S=o.trim().split(`
`);f&&S.shift();const q=S.reduce((t,p)=>{const e=j(p),r=u.reduce((n,i,m)=>{const I=String((e==null?void 0:e[m])??l);return Object.hasOwn(y,i)&&I.toUpperCase()===l?n[i]=y[i]:n[i]=I,n},{}),s=Object.keys(A);return s.length>0&&s.some(i=>((r==null?void 0:r[i])??l).toUpperCase()===l)||t.push("("+u.map(n=>N(r[n])).join(", ")+")"),t},[]);return x=x+q.join(`,
	`)+";",x}return R});
